(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["fbAutologin"],{"0iut":function(e,t,o){o.d(t,"a",(function(){return n}));function n(e,t){const o=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>|<!--[\s\S]*/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,(e,t)=>o.indexOf("<"+t.toLowerCase()+">")>-1?e:"")}t.b=e=>e.replace(/(<([^>]+)>)/gi,"")},Sxnd:function(e,t,o){o.r(t),o.d(t,"fbAutologinCallback",(function(){return j}));var n=o("gxu6"),a=o("K316"),c=o("OCob"),i=o("kJuv"),r=o("28DW"),u=o("h7e3");var _=o("m2Wt"),s=o("h4v/"),b=o("Jr++"),g=o("Ncr9"),l=o("zwad");o("0iut");function f(e){const t=function(e){const{hostname:t}=l.a.parse(e,!0);if(t&&e){if(e.match(/^(http|https):\/\/(www.)?google\.com$|google\.(co|com)\.[a-z]{2}$|google\.[a-z]{2}$/))return"GOOGLE";if(t.includes("bing."))return"BING";if(t.includes("yahoo."))return"YAHOO"}return""}(e);return["GOOGLE","BING","YAHOO"].includes(t)}var d=o("J8m7");const O=[d.t,d.j,d.v,d.r,d.x,d.u],p=e=>"facebook"===e?2:3,h=(e,t)=>{const o=_.a.fromPlainObject({event_type:t});o.updateAuxData({signup_login_method:p(e),unauth_data:JSON.stringify({autologin:!0})}),s.a.getInstance().addEvent(o)},k=e=>{h(e,7536),Object(g.a)((()=>{let e=window.nextUrlParam;const t={autologin:!0};if(!e&&(e=window.location.pathname||"/","/"!==e&&f(document.referrer)&&(t.lp="true"),Object.assign(t,Object(b.a)()),t)){const o=t.next;o&&(e=o,delete t.next)}return l.a.appendQueryString(e,t)})())};function j(e){if(n.a("fbalae")){Object(u.a)("facebook_autologin","autologin_disabled");const e=n.a("fbalae");Object(r.a)("autologin.facebook.skip_for_known_api_errors."+String(e))}else if(Object(r.a)("autologin.facebook_attempt.pure_react"),"connected"===e.status)if(n.a("fba"))Object(u.a)("facebook_autologin","autologin_disabled"),Object(r.a)("autologin.facebook.connected_but_disabled_via_user_cookie");else{const t=e.authResponse;if(!t)return Object(r.a)("autologin.facebook_fail"),void Object(u.a)("facebook_autologin","no_auth_response");Object(u.d)("facebook_autologin"),(e=>{Object(r.a)("autologin."+e);const t=_.a.fromPlainObject({event_type:38,view_type:9});t.updateAuxData({login_provider:e,unauth_data:JSON.stringify({autologin:!0})}),s.a.getInstance().addEvent(t)})("facebook"),h("facebook",7534),Object(i.a)({facebook_id:t.userID,facebook_token:t.accessToken,facebook_autologin:!0},Object(c.a)(),{container:"autologinfb"}).then(()=>{k("facebook")},e=>{((e,t)=>{if(h(e,7535),!O.includes(t.api_error_code))throw t.api_error_code?Object(r.a)(`autologin.${e}.uncaught_api_error_code.${t.api_error_code}`):Object(r.a)(`autologin.${e}.uncaught_with_no_api_error_code`),t;n.b("google"===e?"galae":"fbalae",String(12),12)})("facebook",e)})}else Object(u.a)("facebook_autologin","login_status_"+e.status)}t.default=(e,t)=>{o.e("facebookEnsureInitForDesktop").then(o.bind(null,"TvzZ")).then(({default:o})=>{Object(r.a)("unauth_web.facebook_connect.autologin.attempt"),o(t=>{Object(u.b)("facebook_autologin","UnauthFacebookAutologinScriptLoadedEvent"),Object(r.a)("unauth_web.facebook_autologin.get_login_status.attempt"),t.getLoginStatus(t=>{Object(r.a)("unauth_web.facebook_connect.autologin.success"),"connected"===t.status&&(Object(r.a)("unauth_web.facebook_autologin.get_login_status.response_connected"),Object(u.b)("facebook_autologin","UnauthFacebookAutologinSuccessEvent"),e({type:"FB_AUTOLOGIN_CONNECTED",payload:{}})),j(t),"not_authorized"===t.status?(Object(r.a)("unauth_web.facebook_autologin.get_login_status.response_not_authorized"),e({type:"FB_AUTOLOGIN_NOT_AUTHORIZED",payload:{}})):"authorization_expired"===t.status?(Object(r.a)("unauth_web.facebook_autologin.get_login_status.response_authorization_expired"),e({type:"FB_AUTOLOGIN_AUTH_EXPIRED",payload:{}})):e({type:"FB_AUTOLOGIN_UNKNOWN",payload:{}})})},a.a,t)})}},dish:function(e,t,o){o.d(t,"a",(function(){return a})),o.d(t,"b",(function(){return c}));var n=o("QLqj");const a=()=>n.b.localStorage.getItem("uoiou")||!1,c=e=>{n.b.localStorage.setItem("uoiou",!!e)}},kJuv:function(e,t,o){var n=o("gxu6"),a=o("eOdZ"),c=o("QLqj"),i=o("kmwA"),r=o("ARZW"),u=o("J8m7"),_=o("sv3x"),s=o("AXUD"),b=o("dish"),g=o("OX7c"),l=o("28DW"),f=o("AYc3"),d=o("2y2F"),O=o("yM2L");const p=function(e,t,o="",n=!1){let a="referrer_unknown";try{const e=document.referrer;a=e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"}catch(O){}const c=Object(_.c)(e),i=t===Object(t)?t.hybridTier:"tier_unknown",u=t===Object(t)?t.container:"container_unknown";Object(l.a)("login.referrer."+a+"."+c),Object(l.a)("login.container."+u+"."+c),Object(l.a)("login.type."+c);const s=Object(_.c)(e)||"method_unknown",b=t.page||"page_unknown";e.gplus_autologin?n?(Object(l.a)("mweb_autologin.google_success"),Object(l.i)("new_mweb_autologin_google",{page:b,referrer:a,container:u,hybridTier:i})):(Object(l.a)("web_autologin_google"),Object(l.i)("new_web_autologin_google",{page:b,referrer:a,container:u,hybridTier:i})):e.facebook_autologin?(Object(l.a)("web_autologin_facebook"),Object(l.i)("new_web_autologin_facebook",{page:b,referrer:a,container:u,hybridTier:i})):(Object(l.a)(`web_login.${s}.success.${b}.${u}.${a}.${i}`),Object(l.i)(`new_web_login.${s}.success`,{page:b,referrer:a,container:u,hybridTier:i})),Object(d.a)(o)&&Object(f.g)({id:r.a,eventCategory:"Logins",eventName:"Desktop"}),Object(d.f)(o)&&Object(f.k)({id:"flashtalking-d-login",eventCategory:"Logins",eventName:"Desktop"}),Object(d.c)(o)&&Object(f.h)({pixelId:"dpm_pixel_login_event",eventCategory:"Logins",eventName:"Desktop"}),Object(d.d)(o)&&Object(f.i)({pixelId:"dentsu_pixel_login_event",eventCategory:"Logins",eventName:"Desktop"});const g=e.facebook_autologin||e.gplus_autologin||e.autologin?"autologin":"login";Object(l.e)({action:g,event:"success",type:c})},h=(e,t)=>{Object(l.a)(`web_cross_domain_login.${e}.${Object(_.c)(t)}`)},k=(e,t,o="other",n=!1)=>{if(e){const a=e.http_status===s.b?s.b:e.api_error_code;let c=a;u.b.has(a)&&(c=u.b.get(a));const{container:i}=t;n?Object(l.a)(`unauth_web_client_cctld_login_api_error.${String(c)}.${i||"unknow_container"}.${o}`):Object(l.a)(`unauth_web_client_login_api_error.${String(c)}.${i||"unknow_container"}.${o}`),Object(l.e)({action:"login",event:"fail",type:o})}};t.a=function(e,t,o={},r=!1,u,s,l=!1){if(function(e){return!e.mfa_resend&&!!e.username_or_email}(e)){if(-1!==i.a.settings.CORS_HANDSHAKE_DOMAINS.indexOf(t.origin))return function(e,t,o,n){h("attempt",e);const{referrer:a,facebookToken:c,unauthId:i}=n;return Object(O.loginUser)(e,{recaptchaV3Token:t,referrer:a,facebookToken:c,unauthId:i}).then(t=>{if(t&&t.data){h("success_with_token",e);const n=t.data;return Object(O.exchangeTokenAndSetSession)(n).then(t=>(h("success_token_exchanged",e),p(e,o),Promise.resolve()),t=>{throw h("success_token_not_exchanged",e),t})}throw h("success_without_token",e),new Error},t=>{throw h("failure",e),k(t,o,Object(_.c)(e),!0),t})}(e,s,o,t)}const f=r?null:c.b.localStorage.getItem("visitedPagesBeforeLogin"),d={...e,get_user:e.get_user||e.switch_account&&r,app_type_from_client:7===t.appType?7:5,visited_pages_before_login:f?JSON.stringify(f):null,recaptchaV2Token:u,recaptchaV3Token:s};return a.a.create("UserSessionResource",d).callCreate({showError:!1,async:!0}).then(t=>{const{client_context:a}=t||{},{country:c,active_experiments:i}=a||{};p(e,o,c,l),Object(b.b)(!1);return i&&i.web_cctld_cookies_cleanup&&"enabled"===i.web_cctld_cookies_cleanup&&(n.c("fba"),n.c("logged_out")),Object(g.a)("login").then(()=>t)},t=>(k(t,o,Object(_.c)(e)),Promise.reject(t)))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/fbAutologin-33a4b8619e5d5b2a7cb4.mjs.map